/**
 * lc_micro_slider.js - lightweight responsive slider with jquery.touchSwipe.js integration
 * Version: 1.0
 * Author: LCweb - Luca Montanari
 * Website: http://www.lcweb.it
 * Licensed under the MIT license
 */

(function(b){var m=function(h,c){var f=b.extend({slide_fx:"fadeslide",nav_arrows:!0,carousel:!0,touchswipe:!0,autoplay:!1,animation_time:700,slideshow_time:5E3,pause_on_hover:!0,loader_code:'<span class="lcms_loader"></span>'},c),g=b(h);g.data("lcms_vars",{slides:[],shown_slide:0,cached_img:[],is_sliding:!1,is_playing:!1,paused_on_hover:!1});g.data("lcms_settings",f);var n=function(a,l,e){var d=a.data("lcms_vars"),c=a.data("lcms_settings"),f=d.slides[e],g=f.img?'style="background: url('+f.img+') center center repeat transparent; background-size: cover;"':
"",h=g?"lcms_preload":"",c=g?c.loader_code:"";switch(l){case "init":var k="lcms_active_slide";break;case "fade":k="lcms_fadein";break;case "prev":k="lcms_before";break;case "next":k="lcms_after"}l=""!=b.trim(f.content)?'<div class="lcms_content">'+f.content+"</div>":"";h='<div class="lcms_slide '+k+" "+h+'" rel="'+e+'"><div class="lcms_inner" '+g+">"+l+"</div>"+c+"</div>";a.find(".lcms_wrap").append(h);g&&(-1===b.inArray(f.img,d.cached_img)?b("<img/>").bind("load",function(){d.cached_img.push(this.src);
b(".lcms_slide[rel="+e+"]").removeClass("lcms_preload");b(".lcms_slide[rel="+e+"]").find("> *").not(".lcms_inner").fadeOut(300,function(){b(this).remove()})}).attr("src",f.img):(b(".lcms_slide[rel="+e+"]").removeClass("lcms_preload").addClass("lcms_cached"),b(".lcms_slide[rel="+e+"]").find("> *").not(".lcms_inner").remove()));1<d.slides.length&&(a=e<d.slides.length-1?e+1:0,-1===b.inArray(d.slides[a].img,d.cached_img)&&b("<img/>").bind("load",function(){d.cached_img.push(this.src)}).attr("src",d.slides[a].img));
2<d.slides.length&&(a=0==e?d.slides.length-1:e-1,-1===b.inArray(d.slides[a].img,d.cached_img)&&b("<img/>").bind("load",function(){d.cached_img.push(this.src)}).attr("src",d.slides[a].img))};lcms_slide=function(a,b){var e=a.data("lcms_vars"),d=a.data("lcms_settings");if(!d.carousel&&("prev"==b&&0==e.shown_slide||"next"==b&&e.shown_slide==e.slides.length-1)||e.lcms_is_sliding)return!1;e.lcms_is_sliding=!0;var c="prev"==b?0===e.shown_slide?e.slides.length-1:e.shown_slide-1:e.shown_slide==e.slides.length-
1?0:e.shown_slide+1;n(a,"fade"==d.slide_fx?"fade":b,c);e.shown_slide=c;"fade"==d.slide_fx?a.find(".lcms_active_slide").fadeOut(d.animation_time):"slide"==d.slide_fx?"prev"==b?(a.find(".lcms_before").css("left","-100%").animate({left:"0%"},d.animation_time),a.find(".lcms_active_slide").animate({left:"100%"},d.animation_time)):(a.find(".lcms_after").css("left","100%").animate({left:"0%"},d.animation_time),a.find(".lcms_active_slide").animate({left:"-100%"},d.animation_time)):"fadeslide"==d.slide_fx&&
("prev"==b?(a.find(".lcms_before").fadeTo(0,0).animate({left:"0%",opacity:1},d.animation_time),a.find(".lcms_active_slide").animate({left:"100%",opacity:0},d.animation_time)):(a.find(".lcms_after").fadeTo(0,0).animate({left:"0%",opacity:1},d.animation_time),a.find(".lcms_active_slide").animate({left:"-100%",opacity:0},d.animation_time)));setTimeout(function(){a.find(".lcms_active_slide").remove();a.find(".lcms_slide").removeClass("lcms_fadein lcms_before lcms_after").addClass("lcms_active_slide");
e.lcms_is_sliding=!1},d.animation_time)};b(".lcms_prev").unbind("click");g.delegate(".lcms_prev:not(.lcms_disabled)","click",function(){var a=b(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){a.lcms_stop_slideshow();lcms_slide(a,"prev")},5)});b(".lcms_next").unbind("click");g.delegate(".lcms_next:not(.lcms_disabled)","click",function(){var a=b(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&
clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){a.lcms_stop_slideshow();lcms_slide(a,"next")},5)});var m=function(){b(".lcms_wrap").swipe({swipeRight:function(){var a=jQuery(this).parent();console.log(a);a.lcms_stop_slideshow();lcms_slide(a,"prev")},swipeLeft:function(){var a=jQuery(this).parent();a.lcms_stop_slideshow();lcms_slide(a,"next")},threshold:40,allowPageScroll:"vertical"})};f.pause_on_hover&&g.delegate(".lcms_wrap","mouseenter",function(){var a=b(this).parent(),c=a.data("lcms_vars");
a.data("lcms_settings");c.is_playing&&(a.lcms_stop_slideshow(),c.paused_on_hover=!0)}).delegate(".lcms_wrap","mouseleave",function(){var a=b(this).parent(),c=a.data("lcms_vars");a.data("lcms_settings");c.paused_on_hover&&(a.lcms_start_slideshow(),c.paused_on_hover=!1)});(function(a){var c=a.data("lcms_vars"),e=a.data("lcms_settings");a.find("li").each(function(a,e){b(this).find("noscript").remove();var f={content:b(this).html(),img:b(this).attr("lcms_img")};c.slides.push(f)});a.html('<div class="lcms_wrap"></div>');
c.shown_slide=0;n(a,"init",0);e.nav_arrows&&1<c.slides.length&&a.find(".lcms_wrap").append('<div class="lcms_nav"><span class="lcms_prev"></span><span class="lcms_next"></span></div>');e.autoplay&&a.lcms_start_slideshow();b(document).ready(function(a){"function"==typeof b.fn.swipe&&m()})})(g);return this};b.fn.lc_micro_slider=function(h){b.fn.lcms_destroy=function(){var c=b(this);c.find(".lcms_wrap").remove();var f=c.data("lcms_vars");f.is_playing&&clearInterval(f.is_playing);c.find(".lcms_next, .lcms_prev").undelegate("click");
c.removeData("lcms_vars");c.removeData("lcms_settings");c.removeData("lc_micro_slider");return!0};b.fn.lcms_paginate=function(c){var f=b(this);f.data("lcms_vars");f.data("lcms_settings");f.lcms_stop_slideshow();lcms_slide(f,c);return!0};b.fn.lcms_start_slideshow=function(){var c=b(this),f=c.data("lcms_vars"),g=c.data("lcms_settings");f.is_playing=setInterval(function(){lcms_slide(c,"next")},g.slideshow_time+g.animation_time);return!0};b.fn.lcms_stop_slideshow=function(){var c=b(this),f=c.data("lcms_vars");
c.data("lcms_settings");clearInterval(f.is_playing);f.is_playing=null;return!0};return this.each(function(){if(b(this).data("lc_micro_slider"))return b(this).data("lc_micro_slider");var c=new m(this,h);b(this).data("lc_micro_slider",c)})}})(jQuery);